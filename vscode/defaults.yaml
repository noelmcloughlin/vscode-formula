# -*- coding: utf-8 -*-
# vim: ft=yaml
---
vscode:
  version: 1.43.2
  rootuser: root
  rootgroup: root
  environ_file: /etc/default/vscode.sh
  environ:
    - dummy=dummy
  config:
    path: null
  dir:
    tmp: /tmp/vscode
    archive: /usr/local
  pkg:
    name: vscode
    use_upstream_archive: true   # tarball
    use_upstream_package: false  # snap/brew
    format: tar
    deps:
      - curl
    package:
      name: code  # snap
    uri: https://go.microsoft.com/fwlink/?LinkID=620884   # linux tarball
    archive:
      source: 'set by map.jinja'
      source_hash: 8f38474e258c1bbd469b5311051c50466a080b9e970b506e0e0bad387d524fed
      skip_verify: true     # true needed because ms permalink hash keeps changing
      trim_output: true
  retry_option:
    # https://docs.saltstack.com/en/latest/ref/states/requisites.html#retrying-states
    attempts: 3
    until: true
    interval: 10
    splay: 10
  kernel: {{ grains.kernel|lower }}
  linux:
    altpriority: 0
